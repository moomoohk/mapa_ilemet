<!DOCTYPE html>
<html>
<head>
    <title>מפה אילמת</title>

    <meta charset="UTF-8"/>
    <meta name="description" content="משחק ידיעת הארץ בגירסה מודרנית ופשוטה!">
    <meta name="keywords" content="מפה אילמת, ישראל, ידיעת הארץ, מלך הארץ">
    <meta name="author" content="moomoohk (Meshulam Silk)">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Alef" rel="stylesheet">

    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/p5.js"></script>
    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1//addons/p5.dom.js"></script>
    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.3/proj4-src.js"></script>
    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/date-fns/2.0.0-alpha0/date_fns.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="p5_loading">
        <span id="loading_title" class="center">מפה אילמת</span>
        <img src="Star_of_David.svg" id="star">
        <span id="loading" dir="rtl" class="center">טוען...</span>
    </div>
    <div id="app">
        <div id="sidebar" dir="rtl">
            <div id="title_container">
                <h1 id="title">מפה אילמת</h1>
                <span id="subtitle">&lt; מאת משולם &gt;</span>
            </div>
            <div id="city_name_container">
                <h2 id="city_name_header">חפשו את</h2>
                <span id="city_name" class="center">None</span>
            </div>
            <div id="result_container">
                <h2 id="result_header">תוצאה</h2>
                <span id="distance" class="center"></span>
                <span id="message" class="center"></span>
                <span id="time" class="center"></span>
                <button id="next">המשך</button>
            </div>
        </div>
        <div id="map_image"></div>
    </div>

    <script type="text/javascript">
        function globalError(errorMsg, url, lineNumber) {
            if (arguments.length === 1) {
                url = "unknown";
                lineNumber = "unknown";
            }

            const star = document.querySelector("#star");
            star.style.animationPlayState = "paused";
            star.parentNode.style.zIndex = -1;

            const p = document.createElement("p");
            p.style.backgroundColor = "red";
            p.innerHTML = "Error loading data!";

            const div = document.createElement("div");
            div.style.backgroundColor = "red";
            div.innerText = "At " + url + " line " + lineNumber + ":\n\t" + errorMsg;

            const body = document.querySelector("body");
            body.appendChild(p);
            body.appendChild(div);
        }

        window.onerror = globalError;
    </script>

    <script language="javascript" type="text/javascript" src="main.js"></script>
    <script language="javascript" type="text/javascript" src="data.js"></script>
    <script language="javascript" type="text/javascript" src="city.js"></script>
    <script language="javascript" type="text/javascript" src="controls.js"></script>
    <script language="javascript" type="text/javascript" src="state.js"></script>
</body>
</html>
